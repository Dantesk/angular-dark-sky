!function(){"use strict";function t(){var t,n={baseUri:"https://api.darksky.net/forecast/",baseExclude:"&exclude=",acceptedUnits:["auto","ca","uk2","us","si"],acceptedLanguage:["ar","az","be","bs","cs","de","el","en","es","fr","hr","hu","id","it","is","kw","nb","nl","pl","pt","ru","sk","sr","sv","tet","tr","uk","x-pig-latin","zh","zh-tw"]},e="us",r="en";this.setApiKey=function(n){return t=n,this},this.setUnits=function(t){return-1===_.indexOf(n.acceptedUnits,t)&&console.warn(t+" not an accepted api unit"),e=t,this},this.setLanguage=function(t){return-1===_.indexOf(n.acceptedLanguage,t)&&console.warn(t+" not an accepted api language"),r=t,this},this.$get=["$http","$q",function(a,u){function i(t,n){return f(t,n).current()}function c(t,n){return f(t,n).daily()}function s(t,n){return f(t,n).hourly()}function o(t,n){return f(t,n).minutely()}function l(t,n){return f(t,n).alerts()}function f(t,n){return{current:function(){var e=d("currently");return g(t,n,e)},daily:function(){var e=d("daily");return g(t,n,e)},hourly:function(){var e=d("hourly");return g(t,n,e)},minutely:function(){var e=d("minutely");return g(t,n,e)},alerts:function(){var e=d("alerts");return g(t,n,e)},flags:function(){var e=d("flags");return g(t,n,e)}}}function d(t){var e=["alerts","currently","daily","flags","hourly","minutely"],r=_.filter(e,t),a=_.join(r,",");return n.baseExclude+a}function g(i,c,s){var o=[n.baseUri,t,"/",i,",",c,"?units=",e,"&lang=",r,s,"&callback=JSON_CALLBACK"].join("");return a.jsonp(o).then(function(t){return 200===parseInt(t.status)?t.data:u.reject(t)})["catch"](function(t,n){return u.reject(n)})}var y={getCurrent:i,getForecast:c,getDailyForecast:c,getForecastHourly:s,getForecastMinutely:o,getAlerts:l,getFlags:getFlags};return t||console.warn("No Dark Sky API key set."),y}]}function n(){return{restrict:"E",scope:{icon:"@"},template:'<i class="wi wi-forecast-io-{{ icon }}"></i>'}}angular.module("dark-sky",[]).provider("darkSky",t).directive("darkSkyIcon",["darkSky",n])}();